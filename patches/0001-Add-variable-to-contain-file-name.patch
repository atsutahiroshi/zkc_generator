From 1ba8dce4c00914a90a70586b1f00928b79f8135e Mon Sep 17 00:00:00 2001
From: Hiroshi Atsuta <atsuta.hiroshi@gmail.com>
Date: Wed, 4 Oct 2017 17:18:21 +0200
Subject: [PATCH 01/41] Add variable to contain file name

---
 src/RokiPlugin/RokiSimulatorItem.cpp | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/src/RokiPlugin/RokiSimulatorItem.cpp b/src/RokiPlugin/RokiSimulatorItem.cpp
index ea95e78..4215787 100644
--- a/src/RokiPlugin/RokiSimulatorItem.cpp
+++ b/src/RokiPlugin/RokiSimulatorItem.cpp
@@ -236,6 +236,7 @@ public:
     double viscosity;
     bool useContactFile;
     string contactFileName;
+    string zkcFileName;
     map<rkChain*, Body*> bodyMap;
     //bool useWorldCollision;
     CollisionDetectorPtr collisionDetector;
@@ -979,6 +980,7 @@ RokiSimulatorItemImpl::RokiSimulatorItemImpl(RokiSimulatorItem* self)
     viscosity = 0.0;
     useContactFile = false;
     contactFileName.clear();
+    zkcFileName.clear();
     //useWorldCollision = false;
 
 }
@@ -1007,6 +1009,7 @@ RokiSimulatorItemImpl::RokiSimulatorItemImpl(RokiSimulatorItem* self, const Roki
     viscosity = org.viscosity;
     useContactFile = org.useContactFile;
     contactFileName = org.contactFileName;
+    zkcFileName = org.zkcFileName;
     //useWorldCollision = org.useWorldCollision;
 
 }
@@ -1325,6 +1328,7 @@ void RokiSimulatorItemImpl::doPutProperties(PutPropertyFunction& putProperty)
             (_("Viscosity"), viscosity, changeProperty(viscosity));
     putProperty(_("Use Contact Configuration file"), useContactFile, changeProperty(useContactFile));
     putProperty(_("Contact Configuration file name"), contactFileName, changeProperty(contactFileName));
+    putProperty(_("File name to export as zkc"), zkcFileName, changeProperty(zkcFileName));
 }
 
 
@@ -1347,6 +1351,7 @@ bool RokiSimulatorItemImpl::store(Archive& archive)
     archive.write("viscosity", viscosity);
     archive.write("useContactFile", useContactFile);
     archive.writeRelocatablePath("contactFileName", contactFileName);
+    archive.writeRelocatablePath("zkcFileName", zkcFileName);
     return true;
 }
 
@@ -1376,6 +1381,7 @@ bool RokiSimulatorItemImpl::restore(const Archive& archive)
     archive.read("useContactFile", useContactFile);
     string value;
     archive.readRelocatablePath("contactFileName", contactFileName);
+    archive.readRelocatablePath("zkcFileName", zkcFileName);
     return true;
 }
 
-- 
2.7.4

